(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{357:function(e,t,a){e.exports=a(473)},362:function(e,t,a){},472:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=(a(362),a(18)),i=a(90),s=a(97),u=a(236),m=a.n(u),d=a(338),f=a(339),p=a(20),v=a(128),E=a.n(v),b=function(){return E.a.get("/api/items",{headers:{token:window.localStorage.getItem("token")}})},g=function(e){return E.a.get("/api/items/".concat(e))},h=function(e){return E.a.delete("/api/items/".concat(e))},j=function(e){return E.a.post("/api/items",e)},O=function(e){return E.a.post("/api/store/login",e)},w=a(340),N=a.n(w),k=a(23),x=a(224),S=a(192),y=a.n(S),D=a(347),C=function(e){var t=e.setStoreName,a=function(e){var a=[];e.length>0&&e.forEach((function(e){e.date.length>1?e.date.map((function(t){return a=t===e.date[0]?[].concat(Object(p.a)(a),[{_id:e._id,name:e.name,date:t}]):[].concat(Object(p.a)(a),[{_id:(new Date).valueOf(),date:t,parentId:e._id}])})):a=[].concat(Object(p.a)(a),[Object(f.a)({},e,{date:e.date[0]})])})),a.sort((function(e,t){var a=e.date.split("-").reverse().join(),n=t.date.split("-").reverse().join();return a<n?-1:a>n?1:0})),v(a),t(a[0].store.name),w(a[0].store._id)};function c(){return l.apply(this,arguments)}function l(){return(l=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b().then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){c()}),[]);var i=Object(n.useState)([]),s=Object(o.a)(i,2),u=s[0],v=s[1],E=Object(n.useState)(""),g=Object(o.a)(E,2),O=g[0],w=g[1],S=Object(n.useState)(new Date),C=Object(o.a)(S,2),I=C[0],M=C[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{maxWidth:"80%",margin:"auto",paddingTop:"1rem"}},r.a.createElement(N.a,{columns:[{title:"Name",field:"name",sorting:!1},{title:"Date",field:"date",sorting:!1,editComponent:function(){return r.a.createElement(k.a,{utils:D.a},r.a.createElement(x.a,{disablePast:!0,variant:"inline",format:"DD-MM-YY",margin:"normal",id:"date-picker",value:I,onChange:M}))}}],data:u,editable:{onRowAdd:function(e){return j({store:O,name:e.name,date:y()(I).format("DD-MM-YY")}).then((function(e){return c()})).catch((function(e){return console.log(e)}))},onRowDelete:function(e){return h(e._id).then((function(e){return c()})).catch((function(e){return console.log(e)}))}},options:{actionsColumnIndex:-1,paging:!1,draggable:!1,showTitle:!1},parentChildData:function(e,t){return t.find((function(t){return t._id===e.parentId}))}})))},I=a(35),M=a(29),_=a(51),F=a(52),T=a(53),z=function(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map((function(e){return"col-"+e})).join(" ")},a)},R=function(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)},Y=function(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)},L=function(e){var t=e.children;return r.a.createElement("div",{style:{height:300,clear:"both"},className:"jumbotron"},t)},A=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(r)))).state={item:{}},a}return Object(T.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;g(this.props.match.params.id).then((function(t){return e.setState({item:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(R,{fluid:!0},r.a.createElement(Y,null,r.a.createElement(z,{size:"md-12"},r.a.createElement(L,null,r.a.createElement("h1",null,this.state.item.name," : ",this.state.item.date)))),r.a.createElement(Y,null,r.a.createElement(z,{size:"md-12"},r.a.createElement(i.b,{to:"/"},"Back to all items"))))}}]),t}(n.Component),B=function(){return r.a.createElement(R,{fluid:!0},r.a.createElement(Y,null,r.a.createElement(z,{size:"md-12"},r.a.createElement(L,null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("h1",null,r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))},J=function(e){var t=e.store,a=e.setStore,n=Object(s.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},r.a.createElement(i.b,{to:"/",className:"navbar-brand"},"Expy"),r.a.createElement("span",{className:"navbar-text"},t),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain","aria-controls":"navbarMain","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse flex-grow-1 text-center",id:"navbarMain"},r.a.createElement("ul",{className:"navbar-nav ml-auto flex-nowrap"},window.localStorage.getItem("token")?r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){window.localStorage.removeItem("token"),a(""),n.go("/")}},"Log Out")):r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/user",className:"nav-link"},"Login/Register"))))))},P=(a(472),a(180)),V=a(187),W=a(110),q=function(e){var t=Object(n.useState)(e),a=Object(o.a)(t,2),r=a[0],c=a[1];return{value:r,setValue:c,reset:function(){return c("")},bind:{value:r,onChange:function(e){c(e.target.value)}}}},G=function(){var e=Object(s.f)(),t=Object(n.useState)("login"),a=Object(o.a)(t,2),c=(a[0],a[1],q("")),l=c.value,i=c.bind,u=(c.reset,q("")),m=u.value,d=u.bind,f=(u.reset,q("")),p=(f.value,f.bind,f.reset,q("")),v=(p.value,p.bind,p.reset,""),E="";return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{elevation:23,square:!1,style:{width:"360px",margin:"5% auto"}},r.a.createElement("form",{className:"form",noValidate:!0,autoComplete:"off"},r.a.createElement("form",{className:"login-form"},r.a.createElement(V.a,Object.assign({className:"form-input",id:"store-name",variant:"outlined",label:"Enter store name",helperText:v},i)),r.a.createElement(V.a,Object.assign({className:"form-input",id:"store-password",variant:"outlined",type:"password",label:"Enter password",helperText:E},d)),r.a.createElement(W.a,{variant:"outlined",onClick:function(t){t.preventDefault(),l&&m&&O({name:l,password:m}).then((function(t){var a=t.data.token;window.localStorage.setItem("token",a),e.push("/")})).catch((function(e){return console.log(e.response)}))}},"Log In"),r.a.createElement("p",{className:"message"},"Not registerd? ",r.a.createElement("p",null,"Create an account"))))))},H=function(){var e=r.a.useState(""),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(J,{store:a,setStore:n}),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/items",component:C}),r.a.createElement(s.a,{exact:!0,path:"/",render:function(){return r.a.createElement(C,{setStoreName:n})}}),r.a.createElement(s.a,{exact:!0,path:"/user",render:function(){return r.a.createElement(G,{setStore:n})}}),r.a.createElement(s.a,{exact:!0,path:"/items/:id",component:A}),r.a.createElement(s.a,{component:B}))))};l.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.6c65adfd.chunk.js.map