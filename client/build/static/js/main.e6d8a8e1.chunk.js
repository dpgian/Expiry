(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{357:function(e,t,a){e.exports=a(472)},362:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),s=(a(362),a(16)),c=a(96),l=a(98),u=a(236),m=a.n(u),d=a(338),g=a(339),p=a(20),f=a(112),b=a.n(f),v=function(){return b.a.get("/api/items",{headers:{token:window.localStorage.getItem("token")}})},E=function(e){return b.a.delete("/api/items/".concat(e))},h=function(e){return b.a.post("/api/items",e)},w=function(e){return b.a.post("/api/store",e)},j=function(e){return b.a.post("/api/store/login",e)},O=a(340),N=a.n(O),x=a(23),y=a(225),k=a(90),S=a.n(k),T=a(347),_=function(e){var t=e.setStoreName,a=function(e){var a=[];e.length>0&&e.forEach((function(e){e.date.length>1?e.date.map((function(t){return a=t===e.date[0]?[].concat(Object(p.a)(a),[{_id:e._id,name:e.name,date:t}]):[].concat(Object(p.a)(a),[{_id:(new Date).valueOf(),date:t,parentId:e._id}])})):a=[].concat(Object(p.a)(a),[Object(g.a)({},e,{date:e.date[0]})])})),a.sort((function(e,t){var a=e.date.split("-").reverse().join(),n=t.date.split("-").reverse().join();return a<n?-1:a>n?1:0})),f(a),t(a[0].store.name),O(a[0].store._id)};function o(){return i.apply(this,arguments)}function i(){return(i=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){o()}),[]);var c=Object(n.useState)([]),l=Object(s.a)(c,2),u=l[0],f=l[1],b=Object(n.useState)(""),w=Object(s.a)(b,2),j=w[0],O=w[1],k=Object(n.useState)(new Date),_=Object(s.a)(k,2),D=_[0],M=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{maxWidth:"100%",margin:"auto",paddingTop:"1rem"}},r.a.createElement(N.a,{columns:[{title:"Name",field:"name",sorting:!1,removable:!1},{title:"Date",field:"date",sorting:!1,removable:!1,editComponent:function(){return r.a.createElement(x.a,{utils:T.a},r.a.createElement(y.a,{disablePast:!0,variant:"inline",format:"DD-MM-YY",margin:"normal",id:"date-picker",value:D,onChange:M}))}},{title:"Group",field:"group",sorting:!0}],data:u,editable:{onRowAdd:function(e){return h({store:j,name:e.name,date:S()(D).format("DD-MM-YY")}).then((function(e){return o()})).catch((function(e){return console.log(e)}))},onRowDelete:function(e){return E(e._id).then((function(e){return o()})).catch((function(e){return console.log(e)}))}},options:{columnsButton:!0,grouping:!1,actionsColumnIndex:-1,paging:!1,draggable:!1,showTitle:!1,rowStyle:function(e){return{backgroundColor:e.date===S()().format("DD-MM-YY")?"#FF5722":e.date===S()().add(1,"days").format("DD-MM-YY")?"#FFA726":e.date===S()().add(2,"days").format("DD-MM-YY")?"#FFEE58":S()(e.date,"DD-MM-YY").isBefore(S()())?"#9E9E9E":""}}},parentChildData:function(e,t){return t.find((function(t){return t._id===e.parentId}))},localization:{body:{emptyDataSourceMessage:"No tracked items in store.",editRow:{deleteText:"Are you sure you want to delete this item?"}}}})))},D=function(){return r.a.createElement("h1",null,"Page Not Found \ud83d\ude44")},M=function(e){var t=e.store,a=e.setStore,n=Object(l.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},t?r.a.createElement(c.b,{to:"/item",className:"navbar-brand"},"Expy"):r.a.createElement(c.b,{to:"/",className:"navbar-brand"},"Expy"),r.a.createElement("span",{className:"navbar-text"},t),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain","aria-controls":"navbarMain","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse flex-grow-1 text-center",id:"navbarMain"},r.a.createElement("ul",{className:"navbar-nav ml-auto flex-nowrap"},t?r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){window.localStorage.removeItem("token"),a(""),n.push("/")}},"Log Out")):r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/user",className:"nav-link"},"Login/Register"))))))},C=a(57),Y=a(182),F=a(189),P=a(111),A=a(56),I=function(e){var t=Object(n.useState)(e),a=Object(s.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,reset:function(){return o("")},bind:{value:r,onChange:function(e){o(e.target.value)}}}},R=Object(C.a)({login_page:{width:"360px",margin:"5% auto"},form:{padding:"45px",textAlign:"center"},form_input:{margin:"0 0 15px","& .MuiFormHelperText-root":{color:"rgb(181, 17, 68)"}},form_button:{background:"rgb(109, 31, 55)",width:"100%",padding:"15px",color:"#ffffff","&:hover":{background:"rgb(191, 3, 65)"}},message:{margin:"15px 0 0",color:"#b3b3b3",font:"Medium"},message_link:{margin:"5px 0 0",color:"rgb(109, 31 ,55)",textDecoration:"underline",cursor:"pointer"}}),z=function(){var e=Object(l.f)(),t=Object(n.useState)("login"),a=Object(s.a)(t,2),o=a[0],i=a[1],c=I(""),u=c.value,m=c.bind,d=c.reset,g=I(""),p=g.value,f=g.bind,b=g.reset,v=I(""),E=v.value,h=v.bind,O=v.reset,N=I(""),x=N.value,y=N.bind,k=N.reset,S=Object(n.useState)(""),T=Object(s.a)(S,2),_=T[0],D=T[1],M=Object(n.useState)(""),C=Object(s.a)(M,2),z=C[0],L=C[1],Z=Object(n.useState)(""),B=Object(s.a)(Z,2),J=B[0],q=B[1],V=Object(n.useState)(""),$=Object(s.a)(V,2),G=$[0],H=$[1],W=Object(n.useState)(""),X=Object(s.a)(W,2),K=X[0],Q=X[1],U=function(e){b(),O(),k(),i(e)},ee=R();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{elevation:23,square:!1,className:ee.login_page},r.a.createElement("form",{className:ee.form,noValidate:!0,autoComplete:"off"},"login"===o?r.a.createElement("div",{className:"login_form"},r.a.createElement(F.a,Object.assign({error:""!==_,className:ee.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:_},m)),r.a.createElement(F.a,Object.assign({error:""!==z,className:ee.form_input,id:"store-password",variant:"outlined",type:"password",label:"Enter password",helperText:z},f)),r.a.createElement(P.a,{className:ee.form_button,variant:"outlined",onClick:function(t){return t.preventDefault(),u?p.length<6?(L("Please enter a valid password"),void setTimeout((function(){return L("")}),2500)):void j({name:u,password:p}).then((function(t){var a=t.data.token;window.localStorage.setItem("token",a),e.push("/item")})).catch((function(e){switch(e.response.status){case 404:D(e.response.data.message),setTimeout((function(){return D("")}),2500);break;case 400:L(e.response.data.message),setTimeout((function(){return L("")}),2500);break;default:D("Server error. Please try again."),L("Server error. Please try again."),setTimeout((function(){return D("")}),2500),setTimeout((function(){return L("")}),2500)}})):(d(),D("Please enter your store name"),void setTimeout((function(){return D("")}),2500))}},"Log In"),r.a.createElement("div",{className:ee.message},"Don't have an account? ",r.a.createElement(A.a,{className:ee.message_link,onClick:function(){return U("register")}},"Create an account"))):r.a.createElement("div",{className:"register_form"},r.a.createElement(F.a,Object.assign({error:""!==J,className:ee.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:J},m)),r.a.createElement(F.a,Object.assign({error:""!==G,className:ee.form_input,id:"store-password1",variant:"outlined",type:"password",label:"Enter password",helperText:G},h)),r.a.createElement(F.a,Object.assign({error:""!==K,className:ee.form_input,id:"store-password2",variant:"outlined",type:"password",label:"Re-enter password",helperText:K},y)),r.a.createElement(P.a,{className:ee.form_button,variant:"outlined",onClick:function(e){return e.preventDefault(),/\s/g.test(u)||!u?(d(),q("Enter a valid name (no white spaces)"),void setTimeout((function(){return q("")}),2500)):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(E)?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(x)?E!==x?(Q("The two password must match"),void setTimeout((function(){return Q("")}),2500)):void w({name:u,password:E}).then((function(e){i("login")})).catch((function(e){switch(e.response.status){case 400:q(e.response.data.message),setTimeout((function(){q(""),i("login")}),2500);break;default:q("Server error. Please try again."),H("Server error. Please try again."),Q("Server error. Please try again."),setTimeout((function(){return q("")}),2500),setTimeout((function(){return H("")}),2500),setTimeout((function(){return Q("")}),2500)}})):(Q("Please re-enter password (no spaces, min 6 digit)"),void setTimeout((function(){return Q("")}),2500)):(H("Please enter a valid password (no spaces, min 6 digit)"),void setTimeout((function(){return H("")}),2500))}},"Register"),r.a.createElement("div",{className:ee.message},"Already registered? ",r.a.createElement(A.a,{className:ee.message_link,onClick:function(){return U("login")}},"Log In"))))))},L=Object(C.a)({about_page:{width:"80%",margin:"5% auto",padding:"3%"}}),Z=function(){var e=L();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{elevation:23,square:!1,className:e.about_page},r.a.createElement(A.a,{variant:"h4",align:"center",style:{letterSpacing:".5rem"}},"EXPY"),r.a.createElement(A.a,{variant:"subtitle1",align:"center",style:{margin:"3% auto"}},"Expy is a products expiration date tracker."),r.a.createElement("br",null),r.a.createElement(A.a,{variant:"body2",align:"center"},"Sync between multiple devices",r.a.createElement("br",null),"Just Register and account and you are ready to go!",r.a.createElement("br",null),"( More features coming with future updates )")))},B=function(){var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(M,{store:a,setStore:n}),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Z,null)}}),r.a.createElement(l.a,{exact:!0,path:"/item",render:function(){return r.a.createElement(_,{setStoreName:n})}}),r.a.createElement(l.a,{exact:!0,path:"/user",render:function(){return r.a.createElement(z,{setStore:n})}}),r.a.createElement(l.a,{component:D}))))};i.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.e6d8a8e1.chunk.js.map