(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{357:function(e,t,a){e.exports=a(472)},362:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),i=(a(362),a(16)),c=a(86),s=a(98),u=a(237),m=a.n(u),d=a(338),g=a(339),p=a(19),f=a(100),b=a.n(f),v=function(){return b.a.get("/api/items",{headers:{token:window.localStorage.getItem("token")}})},E=function(e){return b.a.delete("/api/items/".concat(e))},h=function(e){return b.a.post("/api/items",e)},y=function(e){return b.a.post("/api/store",e)},x=function(e){return b.a.post("/api/store/login",e)},w=function(e){return b.a.get("/api/store",{params:{name:e}})},k=a(340),M=a.n(k),O=a(23),j=a(226),D=a(183),S=a(57),N=a(25),_=a.n(N),C=a(347),T=function(e){var t=e.storeId,a=function(e){var t=[];e.length>0&&e.forEach((function(e){e.date.length>1?e.date.map((function(a){return t=a===e.date[0]?[].concat(Object(p.a)(t),[{_id:e._id,name:e.name,date:a}]):[].concat(Object(p.a)(t),[{_id:(new Date).valueOf(),date:a,parentId:e._id}])})):t=[].concat(Object(p.a)(t),[Object(g.a)({},e,{date:e.date[0]})])})),t.sort((function(e,t){var a=e.date.split("-").reverse().join(),n=t.date.split("-").reverse().join();return a<n?-1:a>n?1:0})),f(t)};function o(){return l.apply(this,arguments)}function l(){return(l=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().then((function(e){return a(e.data)})).catch((function(e){switch(console.log(e),e.response.status){case 500:I("Session expired: Please log out and log in again."),window.localStorage.removeItem("storeName");break;default:console.log("Error while fetching items: "+e)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){o()}),[]);var c=Object(n.useState)([]),s=Object(i.a)(c,2),u=s[0],f=s[1],b=Object(n.useState)(new Date),y=Object(i.a)(b,2),x=y[0],w=y[1],k=Object(n.useState)(""),N=Object(i.a)(k,2),T=N[0],I=N[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{maxWidth:"100%",margin:"auto",paddingTop:"1rem",paddingBottom:"3rem"}},T?r.a.createElement(D.a,{elevation:23,square:!1},r.a.createElement(S.a,{variant:"h6",align:"center"},T)):r.a.createElement(M.a,{columns:[{title:"Name",field:"name",sorting:!1,removable:!1},{title:"Date",field:"date",sorting:!1,removable:!1,editComponent:function(){return r.a.createElement(O.a,{utils:C.a},r.a.createElement(j.a,{disablePast:!0,variant:"inline",format:"DD-MM-YY",margin:"normal",id:"date-picker",value:x,onChange:w}))}},{title:"Group",field:"category",sorting:!0}],data:u,editable:{onRowAdd:function(e){return h({store:t,name:e.name,date:_()(x).format("DD-MM-YY"),category:e.category}).then((function(e){return o()})).catch((function(e){return console.log(e)}))},onRowDelete:function(e){return E(e._id).then((function(e){return o()})).catch((function(e){return console.log(e)}))}},options:{columnsButton:!0,grouping:!1,actionsColumnIndex:-1,paging:!1,draggable:!1,showTitle:!1,rowStyle:function(e){return{backgroundColor:e.date===_()().format("DD-MM-YY")?"#FF5722":e.date===_()().add(1,"days").format("DD-MM-YY")?"#FFA726":e.date===_()().add(2,"days").format("DD-MM-YY")?"#FFEE58":_()(e.date,"DD-MM-YY").isBefore(_()())?"#9E9E9E":""}}},parentChildData:function(e,t){return t.find((function(t){return t._id===e.parentId}))},localization:{body:{emptyDataSourceMessage:"No tracked items in store.",editRow:{deleteText:"Are you sure you want to delete this item?"}}}})))},I=function(){return r.a.createElement("h1",null,"Page Not Found \ud83d\ude44")},F=function(e){var t=e.store,a=e.setStore,n=Object(s.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},t?r.a.createElement(c.b,{to:"/item",className:"navbar-brand"},"Expy"):r.a.createElement(c.b,{to:"/",className:"navbar-brand"},"Expy"),r.a.createElement("span",{className:"navbar-text"},t),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain","aria-controls":"navbarMain","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse flex-grow-1 text-center",id:"navbarMain"},r.a.createElement("ul",{className:"navbar-nav ml-auto flex-nowrap"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/dotting",className:"nav-link"},"Dotting")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("storeName"),a(""),n.push("/")}},"Log Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/dotting",className:"nav-link"},"Dotting")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/user",className:"nav-link"},"Login/Register")))))))},Y=a(58),P=a(190),A=a(99),R=function(e){var t=Object(n.useState)(e),a=Object(i.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,reset:function(){return o("")},bind:{value:r,onChange:function(e){o(e.target.value)}}}},q=Object(Y.a)({login_page:{width:"360px",margin:"5% auto"},form:{padding:"45px",textAlign:"center"},form_input:{margin:"0 0 15px","& .MuiFormHelperText-root":{color:"rgb(181, 17, 68)"}},form_button:{background:"rgb(109, 31, 55)",width:"100%",padding:"15px",color:"#ffffff","&:hover":{background:"rgb(191, 3, 65)"}},message:{margin:"15px 0 0",color:"#b3b3b3",font:"Medium"},message_link:{margin:"5px 0 0",color:"rgb(109, 31 ,55)",textDecoration:"underline",cursor:"pointer"}}),L=function(e){var t=e.setStore,a=e.setStoreId,o=Object(s.f)(),l=Object(n.useState)("login"),c=Object(i.a)(l,2),u=c[0],m=c[1],d=R(""),g=d.value,p=d.bind,f=d.reset,b=R(""),v=b.value,E=b.bind,h=b.reset,w=R(""),k=w.value,M=w.bind,O=w.reset,j=R(""),N=j.value,_=j.bind,C=j.reset,T=Object(n.useState)(""),I=Object(i.a)(T,2),F=I[0],Y=I[1],L=Object(n.useState)(""),z=Object(i.a)(L,2),B=z[0],H=z[1],Z=Object(n.useState)(""),V=Object(i.a)(Z,2),J=V[0],W=V[1],$=Object(n.useState)(""),G=Object(i.a)($,2),X=G[0],K=G[1],Q=Object(n.useState)(""),U=Object(i.a)(Q,2),ee=U[0],te=U[1],ae=function(e){h(),O(),C(),m(e)},ne=q();return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{elevation:23,square:!1,className:ne.login_page},r.a.createElement("form",{className:ne.form,noValidate:!0,autoComplete:"off"},"login"===u?r.a.createElement("div",{className:"login_form"},r.a.createElement(P.a,Object.assign({error:""!==F,className:ne.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:F},p)),r.a.createElement(P.a,Object.assign({error:""!==B,className:ne.form_input,id:"store-password",variant:"outlined",type:"password",label:"Enter password",helperText:B},E)),r.a.createElement(A.a,{className:ne.form_button,variant:"outlined",onClick:function(e){return e.preventDefault(),g?v.length<6?(H("Please enter a valid password"),void setTimeout((function(){return H("")}),2500)):void x({name:g,password:v}).then((function(e){var n=e.data.token;window.localStorage.setItem("token",n),window.localStorage.setItem("storeName",g),t(g),a(e.data.storeId),o.push("/item")})).catch((function(e){switch(e.response.status){case 404:Y(e.response.data.message),setTimeout((function(){return Y("")}),2500);break;case 400:H(e.response.data.message),setTimeout((function(){return H("")}),2500);break;default:Y("Server error. Please try again."),H("Server error. Please try again."),setTimeout((function(){return Y("")}),2500),setTimeout((function(){return H("")}),2500)}})):(f(),Y("Please enter your store name"),void setTimeout((function(){return Y("")}),2500))}},"Log In"),r.a.createElement("div",{className:ne.message},"Don't have an account? ",r.a.createElement(S.a,{className:ne.message_link,onClick:function(){return ae("register")}},"Create an account"))):r.a.createElement("div",{className:"register_form"},r.a.createElement(P.a,Object.assign({error:""!==J,className:ne.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:J},p)),r.a.createElement(P.a,Object.assign({error:""!==X,className:ne.form_input,id:"store-password1",variant:"outlined",type:"password",label:"Enter password",helperText:X},M)),r.a.createElement(P.a,Object.assign({error:""!==ee,className:ne.form_input,id:"store-password2",variant:"outlined",type:"password",label:"Re-enter password",helperText:ee},_)),r.a.createElement(A.a,{className:ne.form_button,variant:"outlined",onClick:function(e){return e.preventDefault(),/\s/g.test(g)||!g?(f(),W("Enter a valid name (no white spaces)"),void setTimeout((function(){return W("")}),2500)):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(k)?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(N)?k!==N?(te("The two password must match"),void setTimeout((function(){return te("")}),2500)):void y({name:g,password:k}).then((function(e){m("login")})).catch((function(e){switch(e.response.status){case 400:W(e.response.data.message),setTimeout((function(){W(""),m("login")}),2500);break;default:W("Server error. Please try again."),K("Server error. Please try again."),te("Server error. Please try again."),setTimeout((function(){return W("")}),2500),setTimeout((function(){return K("")}),2500),setTimeout((function(){return te("")}),2500)}})):(te("Please re-enter password (no spaces, min 6 digit)"),void setTimeout((function(){return te("")}),2500)):(K("Please enter a valid password (no spaces, min 6 digit)"),void setTimeout((function(){return K("")}),2500))}},"Register"),r.a.createElement("div",{className:ne.message},"Already registered? ",r.a.createElement(S.a,{className:ne.message_link,onClick:function(){return ae("login")}},"Log In"))))))},z=Object(Y.a)({about_page:{width:"80%",margin:"5% auto",padding:"3%"}}),B=function(){var e=z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{elevation:23,square:!1,className:e.about_page},r.a.createElement(S.a,{variant:"h4",align:"center",style:{letterSpacing:".5rem"}},"EXPY"),r.a.createElement(S.a,{variant:"subtitle1",align:"center",style:{margin:"3% auto"}},"Expy is a products expiration date tracker."),r.a.createElement("br",null),r.a.createElement(S.a,{variant:"body2",align:"center"},"Day dotting made easy.",r.a.createElement("br",null),"Register and account and log in for the expiration manager table",r.a.createElement("br",null),"Sync between multiple devices",r.a.createElement("br",null),"( More features coming with future updates )")))},H=a(10),Z=a(503),V=a(500),J=a(506),W=[{name:"Cows Milk",category:"Milk",expvalue:"0",expsign:"d"},{name:"Almond Milk",category:"Milk",expvalue:"3",expsign:"d"},{name:"Soya Milk",category:"Milk",expvalue:"3",expsign:"d"},{name:"Coconut Milk",category:"Milk",expvalue:"3",expsign:"d"},{name:"Lactose Free Milk",category:"Milk",expvalue:"4",expsign:"d"},{name:"Oat Milk",category:"Milk",expvalue:"3",expsign:"d"},{name:"Syrups",category:"Syrups",expvalue:"3",expsign:"M"},{name:"Vanilla Powder",category:"Ice",expvalue:"1",expsign:"M"},{name:"Hot chocolate powder",category:"Hot Drink",expvalue:"3",expsign:"M"},{name:"Chocolate dusting",category:"Hot Drink",expvalue:"3",expsign:"M"}],$=Object(Y.a)((function(e){return{info_paper:Object(H.a)({width:"80%",margin:"5% auto",padding:"3%"},e.breakpoints.up("md"),{margin:"3% auto"}),button_group:Object(H.a)({display:"flex",flexDirection:"row",margin:"0 auto",justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"})}})),G=function(){var e=$(),t=function(e){return"Mon"===e?"blue":"Tue"===e?"rgb(255,215,0)":"Wed"===e?"red":"Thu"===e?"brown":"Fri"===e?"green":"Sat"===e?"orange":"black"},a=function(e,a){var n=_()().add(e,a);g(_()(n).format("ddd: D-M"));var r=_()(n).format("ddd");s(t(r))},o=Object(n.useState)("transparent"),l=Object(i.a)(o,2),c=l[0],s=l[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),d=m[0],g=m[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),b=f[0],v=f[1],E=[{name:"1 Day",value:_()().add(1,"d").format("ddd: D-M"),color:t(_()().add(1,"d").format("ddd"))},{name:"3 Days",value:_()().add(3,"d").format("ddd: D-M"),color:t(_()().add(3,"d").format("ddd"))},{name:"4 Days",value:_()().add(4,"d").format("ddd: D-M"),color:t(_()().add(4,"d").format("ddd"))},{name:"5 Days",value:_()().add(5,"d").format("ddd: D-M"),color:t(_()().add(5,"d").format("ddd"))},{name:"1 Month",value:_()().add(1,"M").format("ddd: D-M"),color:t(_()().add(1,"M").format("ddd"))},{name:"3 Months",value:_()().add(3,"M").format("ddd: D-M"),color:t(_()().add(3,"M").format("ddd"))}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{elevation:23,square:!1,className:e.info_paper},r.a.createElement(S.a,{variant:"h4",align:"center",style:{letterSpacing:".5rem"}},"DAYDOT"),r.a.createElement(S.a,{variant:"body2",align:"center",style:{margin:"3% auto"}},"Click on the daydot you need or check the full table below. ",r.a.createElement("br",null),"You can also look up and item for an automated daydot."),r.a.createElement(Z.a,{style:{margin:"3%"},className:e.button_group,variant:"text"},r.a.createElement(A.a,{onClick:function(){return a(1,"d")}},"1 Day"),r.a.createElement(A.a,{onClick:function(){return a(3,"d")}},"3 Days"),r.a.createElement(A.a,{onClick:function(){return a(4,"d")}},"4 Days"),r.a.createElement(A.a,{onClick:function(){return a(5,"d")}},"5 Days"),r.a.createElement(A.a,{onClick:function(){return a(1,"M")}},"1 Month"),r.a.createElement(A.a,{onClick:function(){return a(3,"M")}},"3 Months")),r.a.createElement(D.a,{elevation:10,align:"center",style:{backgroundColor:c}},r.a.createElement(S.a,{style:{color:"white"}},d))),r.a.createElement(D.a,{elevation:23,square:!1,className:e.info_paper},r.a.createElement(J.a,{id:"items-listing",options:W,clearOnEscape:!0,groupBy:function(e){return e.category},getOptionLabel:function(e){return e.name?e.name:e},value:b,onChange:function(e,t){return v(t)},renderInput:function(e){return r.a.createElement(P.a,Object.assign({},e,{label:"Search an item",variant:"outlined"}))}}),b?r.a.createElement(D.a,{align:"center",style:{margin:"1% auto"}},r.a.createElement("p",{style:{color:"white",margin:"0",backgroundColor:t(_()().add(b.expvalue,b.expsign).format("ddd"))}}," ",b.name," "),r.a.createElement("p",{style:{margin:"0"}}," ",_()().add(b.expvalue,b.expsign).format("ddd: D-M")," "),r.a.createElement("p",{style:{margin:"0",backgroundColor:"#f5f5f5"}}," ","Shelf life : ".concat(b.expvalue," ").concat(b.expsign)," ")):r.a.createElement(r.a.Fragment,null)),r.a.createElement(D.a,{elevation:23,square:!1,className:e.info_paper},r.a.createElement(V.a,{container:!0,spacing:3,style:{textAlign:"center"}},E.map((function(e){return r.a.createElement(V.a,{item:!0,xs:12,sm:2,key:e.name},r.a.createElement(D.a,null,r.a.createElement("p",{style:{color:"white",margin:"0",backgroundColor:e.color}}," ",e.name," "),r.a.createElement("p",null," ",e.value," ")))})))))},X=function(){Object(n.useEffect)((function(){""===m&&window.localStorage.getItem("storeName")&&w(window.localStorage.getItem("storeName")).then((function(e){o(e.data[0].name),d(e.data[0]._id)})).catch((function(e){return console.log(e)}))}),[]);var e=r.a.useState(""),t=Object(i.a)(e,2),a=t[0],o=t[1],l=r.a.useState(""),u=Object(i.a)(l,2),m=u[0],d=u[1];return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(F,{store:a,setStore:o}),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(s.a,{exact:!0,path:"/item",render:function(){return r.a.createElement(T,{storeId:m})}}),r.a.createElement(s.a,{exact:!0,path:"/user",render:function(){return r.a.createElement(L,{setStore:o,setStoreId:d})}}),r.a.createElement(s.a,{exact:!0,path:"/dotting",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(s.a,{component:I}))))};l.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.b65c7de6.chunk.js.map