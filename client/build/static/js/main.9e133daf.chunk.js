(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{357:function(e,t,a){e.exports=a(472)},362:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),s=(a(362),a(16)),c=a(96),l=a(98),u=a(236),m=a.n(u),d=a(338),g=a(339),f=a(20),p=a(99),b=a.n(p),v=function(){return b.a.get("/api/items",{headers:{token:window.localStorage.getItem("token")}})},E=function(e){return b.a.delete("/api/items/".concat(e))},h=function(e){return b.a.post("/api/items",e)},w=function(e){return b.a.post("/api/store",e)},j=function(e){return b.a.post("/api/store/login",e)},O=function(e){return b.a.get("/api/store",{params:{name:e}})},N=a(340),S=a.n(N),y=a(23),x=a(225),k=a(182),T=a(56),_=a(90),D=a.n(_),I=a(347),M=function(e){var t=e.storeId,a=function(e){var t=[];e.length>0&&e.forEach((function(e){e.date.length>1?e.date.map((function(a){return t=a===e.date[0]?[].concat(Object(f.a)(t),[{_id:e._id,name:e.name,date:a}]):[].concat(Object(f.a)(t),[{_id:(new Date).valueOf(),date:a,parentId:e._id}])})):t=[].concat(Object(f.a)(t),[Object(g.a)({},e,{date:e.date[0]})])})),t.sort((function(e,t){var a=e.date.split("-").reverse().join(),n=t.date.split("-").reverse().join();return a<n?-1:a>n?1:0})),p(t)};function o(){return i.apply(this,arguments)}function i(){return(i=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().then((function(e){return a(e.data)})).catch((function(e){switch(console.log(e),e.response.status){case 500:C("Session expired: Please log out and log in again."),window.localStorage.removeItem("storeName");break;default:console.log("Error while fetching items: "+e)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){o()}),[]);var c=Object(n.useState)([]),l=Object(s.a)(c,2),u=l[0],p=l[1],b=Object(n.useState)(new Date),w=Object(s.a)(b,2),j=w[0],O=w[1],N=Object(n.useState)(""),_=Object(s.a)(N,2),M=_[0],C=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{maxWidth:"100%",margin:"auto",paddingTop:"1rem",paddingBottom:"3rem"}},M?r.a.createElement(k.a,{elevation:23,square:!1},r.a.createElement(T.a,{variant:"h6",align:"center"},M)):r.a.createElement(S.a,{columns:[{title:"Name",field:"name",sorting:!1,removable:!1},{title:"Date",field:"date",sorting:!1,removable:!1,editComponent:function(){return r.a.createElement(y.a,{utils:I.a},r.a.createElement(x.a,{disablePast:!0,variant:"inline",format:"DD-MM-YY",margin:"normal",id:"date-picker",value:j,onChange:O}))}},{title:"Group",field:"category",sorting:!0}],data:u,editable:{onRowAdd:function(e){return h({store:t,name:e.name,date:D()(j).format("DD-MM-YY"),category:e.category}).then((function(e){return o()})).catch((function(e){return console.log(e)}))},onRowDelete:function(e){return E(e._id).then((function(e){return o()})).catch((function(e){return console.log(e)}))}},options:{columnsButton:!0,grouping:!1,actionsColumnIndex:-1,paging:!1,draggable:!1,showTitle:!1,rowStyle:function(e){return{backgroundColor:e.date===D()().format("DD-MM-YY")?"#FF5722":e.date===D()().add(1,"days").format("DD-MM-YY")?"#FFA726":e.date===D()().add(2,"days").format("DD-MM-YY")?"#FFEE58":D()(e.date,"DD-MM-YY").isBefore(D()())?"#9E9E9E":""}}},parentChildData:function(e,t){return t.find((function(t){return t._id===e.parentId}))},localization:{body:{emptyDataSourceMessage:"No tracked items in store.",editRow:{deleteText:"Are you sure you want to delete this item?"}}}})))},C=function(){return r.a.createElement("h1",null,"Page Not Found \ud83d\ude44")},P=function(e){var t=e.store,a=e.setStore,n=Object(l.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},t?r.a.createElement(c.b,{to:"/item",className:"navbar-brand"},"Expy"):r.a.createElement(c.b,{to:"/",className:"navbar-brand"},"Expy"),r.a.createElement("span",{className:"navbar-text"},t),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain","aria-controls":"navbarMain","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse flex-grow-1 text-center",id:"navbarMain"},r.a.createElement("ul",{className:"navbar-nav ml-auto flex-nowrap"},t?r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("storeName"),a(""),n.push("/")}},"Log Out")):r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/user",className:"nav-link"},"Login/Register"))))))},Y=a(57),F=a(189),A=a(112),R=function(e){var t=Object(n.useState)(e),a=Object(s.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,reset:function(){return o("")},bind:{value:r,onChange:function(e){o(e.target.value)}}}},z=Object(Y.a)({login_page:{width:"360px",margin:"5% auto"},form:{padding:"45px",textAlign:"center"},form_input:{margin:"0 0 15px","& .MuiFormHelperText-root":{color:"rgb(181, 17, 68)"}},form_button:{background:"rgb(109, 31, 55)",width:"100%",padding:"15px",color:"#ffffff","&:hover":{background:"rgb(191, 3, 65)"}},message:{margin:"15px 0 0",color:"#b3b3b3",font:"Medium"},message_link:{margin:"5px 0 0",color:"rgb(109, 31 ,55)",textDecoration:"underline",cursor:"pointer"}}),B=function(e){var t=e.setStore,a=e.setStoreId,o=Object(l.f)(),i=Object(n.useState)("login"),c=Object(s.a)(i,2),u=c[0],m=c[1],d=R(""),g=d.value,f=d.bind,p=d.reset,b=R(""),v=b.value,E=b.bind,h=b.reset,O=R(""),N=O.value,S=O.bind,y=O.reset,x=R(""),_=x.value,D=x.bind,I=x.reset,M=Object(n.useState)(""),C=Object(s.a)(M,2),P=C[0],Y=C[1],B=Object(n.useState)(""),L=Object(s.a)(B,2),Z=L[0],q=L[1],J=Object(n.useState)(""),V=Object(s.a)(J,2),$=V[0],G=V[1],H=Object(n.useState)(""),W=Object(s.a)(H,2),X=W[0],K=W[1],Q=Object(n.useState)(""),U=Object(s.a)(Q,2),ee=U[0],te=U[1],ae=function(e){h(),y(),I(),m(e)},ne=z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{elevation:23,square:!1,className:ne.login_page},r.a.createElement("form",{className:ne.form,noValidate:!0,autoComplete:"off"},"login"===u?r.a.createElement("div",{className:"login_form"},r.a.createElement(F.a,Object.assign({error:""!==P,className:ne.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:P},f)),r.a.createElement(F.a,Object.assign({error:""!==Z,className:ne.form_input,id:"store-password",variant:"outlined",type:"password",label:"Enter password",helperText:Z},E)),r.a.createElement(A.a,{className:ne.form_button,variant:"outlined",onClick:function(e){return e.preventDefault(),g?v.length<6?(q("Please enter a valid password"),void setTimeout((function(){return q("")}),2500)):void j({name:g,password:v}).then((function(e){var n=e.data.token;window.localStorage.setItem("token",n),window.localStorage.setItem("storeName",g),t(g),a(e.data.storeId),o.push("/item")})).catch((function(e){switch(e.response.status){case 404:Y(e.response.data.message),setTimeout((function(){return Y("")}),2500);break;case 400:q(e.response.data.message),setTimeout((function(){return q("")}),2500);break;default:Y("Server error. Please try again."),q("Server error. Please try again."),setTimeout((function(){return Y("")}),2500),setTimeout((function(){return q("")}),2500)}})):(p(),Y("Please enter your store name"),void setTimeout((function(){return Y("")}),2500))}},"Log In"),r.a.createElement("div",{className:ne.message},"Don't have an account? ",r.a.createElement(T.a,{className:ne.message_link,onClick:function(){return ae("register")}},"Create an account"))):r.a.createElement("div",{className:"register_form"},r.a.createElement(F.a,Object.assign({error:""!==$,className:ne.form_input,id:"store-name",variant:"outlined",label:"Enter store name",helperText:$},f)),r.a.createElement(F.a,Object.assign({error:""!==X,className:ne.form_input,id:"store-password1",variant:"outlined",type:"password",label:"Enter password",helperText:X},S)),r.a.createElement(F.a,Object.assign({error:""!==ee,className:ne.form_input,id:"store-password2",variant:"outlined",type:"password",label:"Re-enter password",helperText:ee},D)),r.a.createElement(A.a,{className:ne.form_button,variant:"outlined",onClick:function(e){return e.preventDefault(),/\s/g.test(g)||!g?(p(),G("Enter a valid name (no white spaces)"),void setTimeout((function(){return G("")}),2500)):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(N)?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}$/g.test(_)?N!==_?(te("The two password must match"),void setTimeout((function(){return te("")}),2500)):void w({name:g,password:N}).then((function(e){m("login")})).catch((function(e){switch(e.response.status){case 400:G(e.response.data.message),setTimeout((function(){G(""),m("login")}),2500);break;default:G("Server error. Please try again."),K("Server error. Please try again."),te("Server error. Please try again."),setTimeout((function(){return G("")}),2500),setTimeout((function(){return K("")}),2500),setTimeout((function(){return te("")}),2500)}})):(te("Please re-enter password (no spaces, min 6 digit)"),void setTimeout((function(){return te("")}),2500)):(K("Please enter a valid password (no spaces, min 6 digit)"),void setTimeout((function(){return K("")}),2500))}},"Register"),r.a.createElement("div",{className:ne.message},"Already registered? ",r.a.createElement(T.a,{className:ne.message_link,onClick:function(){return ae("login")}},"Log In"))))))},L=Object(Y.a)({about_page:{width:"80%",margin:"5% auto",padding:"3%"}}),Z=function(){var e=L();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{elevation:23,square:!1,className:e.about_page},r.a.createElement(T.a,{variant:"h4",align:"center",style:{letterSpacing:".5rem"}},"EXPY"),r.a.createElement(T.a,{variant:"subtitle1",align:"center",style:{margin:"3% auto"}},"Expy is a products expiration date tracker."),r.a.createElement("br",null),r.a.createElement(T.a,{variant:"body2",align:"center"},"Sync between multiple devices",r.a.createElement("br",null),"Just Register and account and you are ready to go!",r.a.createElement("br",null),"( More features coming with future updates )")))},q=function(){Object(n.useEffect)((function(){""===m&&window.localStorage.getItem("storeName")&&O(window.localStorage.getItem("storeName")).then((function(e){o(e.data[0].name),d(e.data[0]._id)})).catch((function(e){return console.log(e)}))}),[]);var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],o=t[1],i=r.a.useState(""),u=Object(s.a)(i,2),m=u[0],d=u[1];return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(P,{store:a,setStore:o}),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Z,null)}}),r.a.createElement(l.a,{exact:!0,path:"/item",render:function(){return r.a.createElement(M,{storeId:m})}}),r.a.createElement(l.a,{exact:!0,path:"/user",render:function(){return r.a.createElement(B,{setStore:o,setStoreId:d})}}),r.a.createElement(l.a,{component:C}))))};i.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.9e133daf.chunk.js.map